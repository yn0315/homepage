<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="./css/main.css">
    <script src="/script.js"></script>

    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

</head>

<body>
    <header id="header">
        <div class="inner_header">
            <h1 class="logo">
                <a href="http://yn0000.shop">
                    <img id="logo_img" src="/img/logo_img.gif" alt="로고">
                </a>
            </h1>

            <div id="menu">
                <ul class="menu_ul">
                    <li><a href="#">포트폴리오</a></li>
                    <li><a href="#">회사소개</a></li>
                    <li><a href="#">인터뷰작성</a></li>
                </ul>
                <ul id="second_menu" class="menu_ul">
                    <li><a href="#">브랜딩</a></li>
                    <li><a href="#">로고디자인</a></li>
                    <li><a href="#">네이밍</a></li>
                    <li><a href="#">편집디자인</a></li>
                    <li><a href="/homepage">홈페이지</a></li>

                </ul>
                <ul id="third_menu" class="menu_ul">
                    <li><a href="#">공지사항</a></li>
                    <li><a href="#">문의</a></li>
                    <li><a href="#">후기</a></li>

                </ul>
            </div>
            <!-- 파일다운로드 -->
            <a id="file_download" href="/txt/server.txt" target="_blank" download="server.txt">회사소개서 다운</a>

            <div class="tel_no">
                <div>
                    <p>1544-1234</p>
                    <p>평일 9-6시 (점심 01:00 - 2시)</p>
                </div>
            </div>
            <div class="info_box">
                <p>우리 1005-000-000000</p>
                <p>(주)디자인오브</p>
                <p>brand@brand.co.kr</p>
            </div>
            <ul id="and_page">
                <li><a href="/login">LOGIN</a></li>
                <li><a href="/join">JOIN</a></li>
                <li><a href="#">CART</a></li>
                <li><a href="#">MYPAGE</a></li>
            </ul>

        </div>

    </header>
    <section id="login_body">
        <div id="login_form_outBox">

            <div id="login_form">

                <form name = "form" action="/loginAction" method="POST">


                    <div class="input-box">
                        <input id="id" type="text" name="username" placeholder="아이디">

                    </div>

                    <div class="input-box">
                        <input id="pw" type="password" name="password" placeholder="비밀번호">

                    </div>

                    <button id="login_button" type="button">로그인</button>

                </form>
            </div>
        </div>

        <script>
            //인풋창이 비어있는지 확인
            // function isEmpty(value) {
            //     if(value === null || value === 'undefined' || value === "") {
            //         return false;
            //     }else {
            //         return true;
            //     }

            // }

            // //로그인 함수
            // function loginSubmit() {
            //     let form = document.form;
            //     let id = isEmpty(document.getElementById('id'));
            //     let pw = isEmpty(document.getElementById('pw'));
            //     if(id === true && pw === true) {
            //         form.submit();
            //     }else {
            //         alert('다시 입력해주세요');
            //     }
            // }

            function value() {
                var val = false
                $('#id').val() == null || $('#id').val() == 'undefined' || $('#id').val() == '' ? alert('아이디를 입력해주세요.') :
                    $('#pw').val() == null || $('#input_password').val() == 'undefined' || $('#input_password').val() == '' ? alert('비밀번호를 입력해주세요.') : val = true;

                return val;
            }
            $('#login_button').on('click', function () {
                // if (value()) {

                //     var param = {
                //         "id": $('#id').val(),
                //         "pw": $('#pw').val()
                //     }

                //     var login = {
                //         "login": "login"
                //     }
                //     console.log(param);
                //     var rvalue = new Array();
                //     $.ajax({
                //         type: "post",
                //         url: "/loginAction",
                //         data: param,
                //         async: false,
                //         success: function (data) {
                //             alert('로그인되었습니다.');
                //             alert(data);
                //             window.location.href = data;
                //             $.ajax({
                //                 url: '/user/' + data.id, // id는 동적으로 설정할 수 있습니다.
                //                 type: 'GET',
                //                 success: function (data) {
                //                     // 성공 시 실행할 코드
                //                     console.log(data);
                //                 },
                //                 error: function (xhr, status, error) {
                //                     // 에러 발생 시 실행할 코드
                //                     console.log(error);
                //                 }
                //             });
                //         },
                //         error: function (e) {
                //             alert(e.reponseText);
                //         }
                //     });


                // }


                if (value()) {
                    var param = {
                        "id": $('#id').val(),
                        "pw": $('#pw').val()
                    }
                    $.ajax({
                        type: "post",
                        url: "/loginAction",
                        data: param,
                        async: false,
                        success: function (data) {
                            alert('로그인되었습니다.');
                            window.location.replace('/');
                        },
                        error: function (e) {
                            alert(e.reponseText);
                        }
                    });
                }

            })
        </script>
    </section>

</body>

</html>